## 中证指数
[指数浏览器-中证指数有限公司](https://www.csindex.com.cn/#/indices/family/list)

沪深 300 的成长与价值因子编制方案：
[csi-web-dev.oss-cn-shanghai-finance-1-pub.aliyuncs.com/static/html/csindex/public/uploads/indices/detail/files/zh\_CN/211\_000918\_Index\_Methodology\_cn.pdf](https://csi-web-dev.oss-cn-shanghai-finance-1-pub.aliyuncs.com/static/html/csindex/public/uploads/indices/detail/files/zh_CN/211_000918_Index_Methodology_cn.pdf)
## 基本面

#### 指数营业收入与净利润增长率

1. 获取沪深 300 的成分股
2. 获取成分股在最近 3 年的营业收入、扣非净利润，以及营业收入和扣非净利润的增长率
3. 获取营业收入或净利润增长率 TopN 的股票
4. 获取 TopN 股票所在的申万 L 3行业，以及行业的成分股
5. 获取行业成分股的平均营业收入和净利润增长率
6. 所属行业中市值最大的股票的最近一年的营业收入、净利润，以及对应的增长率
7. 保存 TopN 股票的以下数据：
	1. 最近 3 年的平均营业收入、扣非净利润，以及对应的增长率
	2. 最近一年的营业收入、净利润，以及对应的增长率
	3. 所属行业最近一年的平均营业收入和净利润增长率
	4. 所属行业中市值最大的股票，最近一年的营业收入、净利润，以及对应的增长率

###### 使用的接口：
[利润表](https://tushare.pro/document/2?doc_id=33)
[申万行业成分](https://tushare.pro/document/2?doc_id=335)
#### 指数股息率

1. 获取沪深 300 的成分股
2. 获取成分股在最近 3 年以及最近交易日的股息率TTM和市盈率TTM，
3. 获取股息率 TopN 的股票
4. 获取 TopN 股票所在的申万 L 3行业，以及行业的成分股
5. 获取行业成分股在最近交易日的平均股息率、平均市盈率
6. 所属行业中市值最大的股票的最近交易日的股息率、市盈率
7. 保存 TopN 股票的以下数据：
	1. 最近 3 年以及最近交易日的股息率TTM和市盈率TTM
	2.  所属行业最近交易日的平均股息率、平均市盈率
	3. 所属行业中市值最大的股票的最近交易日的股息率、市盈率

###### 使用的接口:

[每日指标](https://tushare.pro/document/2?doc_id=32)

## 每日指标


## 回测

#### SimpleMovingAverageCrossover

当短周期均线上穿或者下穿长周期均线时进行交易

## 个股与行业市盈率
写一个股票回测策略，股票的close、市盈率等数据从data目录下的各股票成分股获取，通过接口获取同花顺的行业列表，获取每个行业中市值最大的成分股的pe ttm 记作A，通过行业指数行情接口获取行业的PE ttm记作B，生成一个策略，如果A小于B百分之10则生成买入信号，大于百分之20则卖出。该回测策略应包含买卖点管理、仓位管理、资金管理等功能

这个回测策略实现了以下主要功能：

- 数据获取：
	- 从本地data目录读取股票数据
	- 通过tushare接口获取同花顺行业分类和行业PE数据

- 信号生成：
	- 获取每个行业中市值最大的股票
	- 比较个股PE与行业PE，生成买卖信号
	- PE低于行业PE的90%生成买入信号
	- PE高于行业PE的120%生成卖出信号

- 仓位管理：
	- 单个股票最大仓位限制为20%
	- 买入时以100股为最小单位
	- 确保资金充足性检查

- 资金管理：
	- 跟踪当前可用资金
	- 记录每笔交易
	- 计算每日净值

- 回测结果分析：
	- 计算总收益率
	- 计算最大回撤
	- 生成交易记录
	- 绘制净值曲线
## 质量、反转因子

- 股票池：A500
- 质量因子：营业总收入增长率、扣非净利润增长率、ROE同比增长率，ROE
- 技术指标：RSI 12日和24日
- 选取：对每只股票按照上述指标分别排序，前30%得3分，前30%-60%得1分，60%之后的得0分，其中1. RSI倒序排列，2. ROE同比增长率 前10%得 5分；将上述得分相加，按分数排序